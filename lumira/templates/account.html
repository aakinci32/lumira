{% extends 'base.html' %}
{% block title %}Account{% endblock %}

{% block content %}
<section class="section container">
    <h1 class="section__title">Account Details</h1>

    <!-- User Details -->
    <div class="account__details">
        <h2>Your Details</h2>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Name:</strong> {{ user.first_name }} {{ user.last_name }}</p>
    </div>

    <!-- Associated Company Details -->
    {% if company %}
    <div class="account__company">
        <h2>Company Information</h2>
        <p><strong>Name:</strong> {{ company.name }}</p>
        <p><strong>Email:</strong> {{ company.email }}</p>
        <p><strong>Phone:</strong> {{ company.phone }}</p>
        <p><strong>Website:</strong> <a href="{{ company.website }}" target="_blank">{{ company.website }}</a></p>
        <p><strong>Description:</strong> {{ company.description }}</p>
        {% if company.logo %}
        <p><strong>Logo:</strong></p>
        <img src="{{ company.logo.url }}" alt="{{ company.name }} logo" class="company-logo">
        {% endif %}
    </div>
    {% endif %}

    <!-- Availability Details -->
    {% if availability %}
    <div class="account__availability">
        <h2>Your Availability</h2>
        <table class="availability-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Start Time</th>
                    <th>End Time</th>
                </tr>
            </thead>
            <tbody>
                {% for slot in availability %}
                <tr>
                    <td>{{ slot.date }}</td>
                    <td>{{ slot.start_time }}</td>
                    <td>{{ slot.end_time }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

    <!-- Client Reservations -->
    {% if reservations %}
    <div class="account__reservations">
        <h2>Your Reservations</h2>
        <table class="reservations-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Start Time</th>
                    <th>End Time</th>
                    <th>Service</th>
                </tr>
            </thead>
            <tbody>
                {% for reservation in reservations %}
                <tr>
                    <td>{{ reservation.date }}</td>
                    <td>{{ reservation.start_time }}</td>
                    <td>{{ reservation.end_time }}</td>
                    <td>{{ reservation.service }}</td> <!-- Assuming a service field -->
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p>You have no active reservations.</p>
    {% endif %}
</section>
{% endblock %}
